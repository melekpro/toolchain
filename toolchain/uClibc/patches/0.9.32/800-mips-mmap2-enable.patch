MIPS mmap can not access over 4G file

 http://bugs.busybox.net/show_bug.cgi?id=3853

Index: uClibc-0.9.32/libc/sysdeps/linux/common/mmap64.c
===================================================================
--- uClibc-0.9.32.orig/libc/sysdeps/linux/common/mmap64.c	2011-06-15 12:12:32.827671955 +0800
+++ uClibc-0.9.32/libc/sysdeps/linux/common/mmap64.c	2011-06-15 12:13:09.496711913 +0800
@@ -64,7 +64,7 @@
 	                       fd, ((__u_quad_t) offset >> MMAP2_PAGE_SHIFT));
 #  else
 	return __syscall_mmap2(addr, len, prot, flags,
-	                       fd, ((__u_long) offset >> MMAP2_PAGE_SHIFT));
+	                       fd, (__u_long)( offset >> MMAP2_PAGE_SHIFT));
 #  endif
 }
 
Index: uClibc-0.9.32/libc/sysdeps/linux/mips/mmap.c
===================================================================
--- uClibc-0.9.32.orig/libc/sysdeps/linux/mips/mmap.c	2011-06-15 12:10:44.780671954 +0800
+++ uClibc-0.9.32/libc/sysdeps/linux/mips/mmap.c	2011-06-15 12:11:29.908723961 +0800
@@ -11,15 +11,10 @@
 #include <sys/syscall.h>
 
 
-#if 0
-/* For now, leave mmap using mmap1 since mmap2 seems
- * to have issues (i.e. it doesn't work 100% properly).
- */
 #ifdef __NR_mmap2
 # undef __NR_mmap
 # define __NR_mmap __NR_mmap2
 #endif
-#endif
 
 _syscall6 (__ptr_t, mmap, __ptr_t, addr, size_t, len, int, prot,
 	   int, flags, int, fd, __off_t, offset)
